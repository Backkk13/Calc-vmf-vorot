(()=>{"use strict";const e=()=>{const e=[],t=document.querySelector(".calc-nt-b9234 form"),c=document.querySelector(".calc-nt-b9234 .form-contact"),n=document.querySelectorAll(".preloader"),l=document.querySelector(".calc-nt-width"),r=document.querySelector(".calc-nt-height"),o=document.querySelectorAll(".calc-nt-motor"),a=document.querySelectorAll(".calc-nt-door"),i=document.querySelectorAll(".calc-nt-garden"),u=document.querySelectorAll(".calc-nt-photocell"),d=(document.querySelector(".calc-nt-city"),document.querySelector(".calc-nt-b9234 input[name=email]")),s=(document.querySelector(".calc-nt-result"),document.querySelector(".calc-nt-b9234 .submit")),h=document.querySelectorAll(".calc-nt-b9234 .price-result span");let y,p,m,g,b,f,S,v;function q(e){for(let t=0;t<e.length;t++)if("radio"==e[t].type&&e[t].checked)return 0==t}t.addEventListener("change",(t=>{var c;!function(){function t(e,t){let c=t.find((t=>t>=e));return void 0===c&&(c=wArr[wArr.length-1]),c}y=Math.round(l.value/2*3*1e3),p=Math.round(1e3*(r.value-.1)),y=t(y,wArr),p=t(p,hArr),g=(l.value/2*3).toFixed(2),b=(r.value-.1).toFixed(2),f=Math.round(g*b*priceWHFormula),f<minPriceWelding&&(f=minPriceWelding),S=wArr.findIndex((e=>e==y)),v=hArr.findIndex((e=>e==p)),m=priceGrid[v][S],e[0]=`Ширина - ${y} Выстоа ${p} = ${m}`,e[1]=`Ширина - ${g} Выстоа ${b} (-0.1м)  = ${f}`}(),function(t){if(t){let t=(Number.parseFloat(l.value)+1)*priceCostGearRackFormula+priceMotor;m+=t,f+=t,e[0]+=` автоматика + ${t}`,e[1]+=` автоматика + ${t}`}}(q(o)),q(a)&&(m+=priceDoor[v],f+=priceWeldingGateFormula,e[0]+=` калитка  + ${priceDoor[v]}`,e[1]+=` калитка  + ${priceWeldingGateFormula}`),c=q(i),q(a)&&c&&(m+=priceLockGate,f+=priceLockGate,e[0]+=` Замок  + ${priceLockGate}`,e[1]+=` Замок  + ${priceLockGate}`),function(){if(!u[2].checked&&(u[0].checked||u[1].checked)){let t=0;u[0].checked&&(t+=priceLamp),u[1].checked&&(t+=priceSensor),m+=t,f+=t,e[0]+=` лампа-сенор  + ${t}`,e[1]+=` лампа-сенор  + ${t}`}}(),m+=priceRegulation,f+=priceRegulation,e[0]+=` регулировка  + ${priceRegulation}`,e[1]+=` регулировка  + ${priceRegulation}`,h[1].textContent=m,h[0].textContent=f})),t.addEventListener("submit",(e=>{e.preventDefault()})),s.addEventListener("click",(l=>{let r=c.querySelectorAll("input"),o=!0;r.forEach((e=>{e.value<=1&&(e.parentNode.classList.add("error"),setTimeout((()=>{e.parentNode.classList.remove("error")}),2e3),o=!1)})),o&&(n[0].classList.add("active"),function(){const c=document.querySelectorAll(".calc-nt-b9234 .block"),n=new FormData(this);n.append("name",d.value),n.append("email",function(){let t=" nt-nt ";return t+="Цена комплекта ворот Свари сам - "+f+" nt-nt ",t+="Цена комплекта ворот Собери сам - "+m+" nt-nt  nt-nt ",t+=e[0]+" nt-nt "+e[1]+" nt-nt  nt-nt ",document.querySelectorAll(".calc-nt-b9234 .block").forEach((e=>{const c=e.querySelector(".header"),n=e.querySelectorAll("input");c&&(t+=c.textContent+" "),n.forEach(((e,c)=>{"range"==e.getAttribute("type")&&(t+=e.value+" "),"checkbox"==e.getAttribute("type")&&e.checked&&(t+=e.parentNode.querySelector("label").textContent.replace(/\n+/g,"")+" "),e.checked&&(t+=0==c?"Да":"Нет "),"text"==e.getAttribute("type")&&(t+=e.value+" ")})),t+=" nt-nt "})),t}()),(async e=>{console.log(1);const t=await fetch("https://fjordreview.ru/mail/2/index.php",{method:"POST",body:e});if(!t.ok)throw new Error(`Ошибка по адресу ${url}, статус ошибки ${t.status}`);return await t.text()})(n).then((e=>{c[c.length-2].style.display="none",c[c.length-1].style.display="block",console.log(e),t.reset()}))}(),setTimeout((()=>{n[0].classList.remove("active")}),5e3))}))},t=()=>{function e(e){var t="+7 (___) ___ ____",c=0,n=t.replace(/\D/g,""),l=this.value.replace(/\D/g,"");n.length>=l.length&&(l=n),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&c<l.length?l.charAt(c++):c>=l.length?"":e})),"blur"==e.type?2==this.value.length&&(this.value=""):function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var c=t.createTextRange();c.collapse(!0),c.moveEnd("character",e),c.moveStart("character",e),c.select()}}(this.value.length,this)}var t=document.querySelector(".calc-nt-b9234 input[name=phone]");t.addEventListener("input",e,!1),t.addEventListener("focus",e,!1),t.addEventListener("blur",e,!1)};window.addEventListener("DOMContentLoaded",(()=>{(()=>{function e(e,t){const c=e.value,n=e.min||0,l=e.max||100,r=Number(100*(c-n)/(l-n));console.log(),t.classList.contains("notifyCount")&&(t.textContent=c),t.style.left=`calc(${r}% - 14px)`}document.querySelectorAll(".calc-nt-b9234 .range-wrap").forEach((t=>{const c=t.querySelector(".range"),n=t.querySelector(".notifyVal"),l=t.querySelector(".notifyCount"),r=t.querySelector(".min"),o=t.querySelector(".max");r.textContent=c.getAttribute("min"),o.textContent=c.getAttribute("max"),c.addEventListener("input",(()=>{e(c,n),e(c,l)})),e(c,n),e(c,l)}))})(),document.querySelectorAll(".calc-nt-b9234").forEach((e=>{const t=e.querySelectorAll(".block"),c=e.querySelector(".loading"),n=e.querySelector(".btn-block"),l=e.querySelector(".calc-nt-b9234 .btn-block button.btnNext"),r=e.querySelector(".calc-nt-b9234 .btn-block button.btnPrev"),o=(e.querySelectorAll(".calc-nt-garden"),e.querySelector(".calc-nt-city"),e.querySelectorAll(".calc-nt-door"),e.querySelectorAll("input.calc-nt-photocell"));let a=1;function i(){c.style.width=1==a?"0%":100*(a-1)/(t.length-2)+"%"}function u(e){e>t.length&&(a=t.length),e<1&&(a=1),t.forEach(((e,t)=>{e.style.display="none",e.setAttribute("data-page",t+1)})),t[a-1].style.display="block",i()}function d(e,t){e.forEach(((e,c)=>{setTimeout((()=>{e.classList.add(t),setTimeout((()=>{e.classList.remove(t)}),2e3)}),100*c)}))}function s(e){t[4].querySelectorAll("input")[0].checked||a+e-1<t.length&&6==t[a+e-1].getAttribute("data-page")&&(e*=2),t[a-1].classList.contains("important")&&e>0&&!function(){let e=!1;return t[a-1].querySelectorAll("input").forEach((t=>{(t.checked||t.value.length>2)&&(e=!0)})),e}()?t[a-1].querySelector("input[type=text]")?d(t[a-1].querySelectorAll(".user-box"),"error"):d(t[a-1].querySelectorAll("label"),"hvr-bounce-out"):u(a+=e),a==t.length-2?l.textContent="Получить расчет":l.textContent="Далее",a==t.length-1?n.style.display="none":n.style.display="block",r.style.display=a<3?"none":"block"}console.log(l),i(),function(){function e(){(o[0].checked||o[1].checked)&&(o[2].checked=!1)}o[0].addEventListener("click",(t=>{e()})),o[1].addEventListener("click",(t=>{e()})),o[2].addEventListener("click",(e=>{o[2].checked&&(o[1].checked=!1,o[0].checked=!1)}))}(),u(),l.addEventListener("click",(()=>{s(1)})),r.addEventListener("click",(()=>{s(-1)}))})),e(),t()}))})();